function Config(){}var Assets=Class.extend({queue:void 0,callback:void 0,scope:void 0,loaderBar:void 0,percentTf:void 0,init:function(a,b){this.callback=a,this.scope=b,this.preloader=new Preloader,this.queue=new createjs.LoadQueue(!1),createjs.Sound.alternateExtensions=["mp3"],this.queue.installPlugin(createjs.Sound);var c,d=["background","fader","circle","circle2","circle3","circle4","bullet","dialogSmall","dialogMedium","dialogBig","face1","face2","face3","face4","rotateDevice","playButton","playButtonBig","soundIconOn","soundIconOff","cloud1","cloud2","eyesAnim","eyesStatic","gameTitle","levelSelectTitle","homeButton","homeButtonPressed","upButton","upButtonPressed","downButton","downButtonPressed","levelItemBack","levelItemCompleteBack","levelItemLockedBack","levelItemLock","restartButton","restartButtonPressed","menuButton","pauseButton","pauseButtonPressed","levelUIBack","LevelTapsBackground","levelCompleteTitle","nextButton","nextButtonPressed","levelFailTitle","blackBack","pauseInner","exitButton","exitButtonPressed","exit2ButtonBig","resumeButton","pauseTitle","deleteProgressTitle","yesButton","yesButtonPressed","noButton","noButtonPressed","gameCompleteTitle","creditsInner","creditsTitle","creditsButton","creditsButtonPressed","closeButton","closeButtonPressed","postepennoLogo"],e=["sndClick","sndLevelComplete","sndLevelFail","sndPop","sndWobble","music"],f=[];for(c=0;c<d.length;c++)f.push({id:d[c],src:"assets/images/"+d[c]+".png"});for(c=0;c<e.length;c++)f.push({id:e[c],src:"assets/sounds/"+e[c]+".ogg"});this.queue.on("fileload",this.onFileLoad,this),this.queue.on("complete",this.onComplete,this),this.queue.loadManifest(f)},get:function(a){return this.queue.getResult(a)},onComplete:function(){this.preloader.destroy(),this.callback.call(this.scope)},onFileLoad:function(){this.preloader.update(this.queue.progress)}}),Component=Class.extend({init:function(){},destroy:function(){}}),ComponentBox=Class.extend({init:function(){this.components=[]},addComponent:function(a){this.components.push(a)},removeComponent:function(a){var b=this.components.indexOf(a);this.components.splice(b,1),a.destroy()},destroyComponents:function(){for(;this.components.length>0;){var a=this.components.pop();a.destroy()}},destroy:function(){this.destroyComponents()}});Config.WIDTH=320,Config.HEIGHT=480,Config.VERSION="0.94",Config.CIRCLE_RADIUS=30,Config.BULLET_SPEED=5,Config.TRANSPARENT=!1,Config.ANIMATION=!0,Config.START_LAST_LEVEL=!1,Config.OPEN_ALL_LEVELS=!1,Config.TEST_GAME_COMPLETE=!1,Config.SHOW_FPS=!1;var Game=Class.extend({init:function(){this.createLevels(),this.progress=new GameProgress(this)},loadProgress:function(){console.log("first"),console.log(localStorage["game.version"]),console.log("second")},createLevels:function(){this.levels=[],this.addLevel({name:"First",clicks:4,circles:[{x:224,y:320,shots:0,angle:0,gap:90,armor:0},{x:96,y:320,shots:0,angle:0,gap:90,armor:0},{x:224,y:195,shots:0,angle:0,gap:90,armor:0},{x:96,y:195,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Simple Quad",clicks:1,circles:[{x:64,y:365,shots:1,angle:-90,gap:90,armor:0},{x:255,y:365,shots:1,angle:180,gap:90,armor:0},{x:257,y:174,shots:1,angle:90,gap:90,armor:0},{x:65,y:171,shots:1,angle:0,gap:90,armor:0}]}),this.addLevel({name:"One Quad Touch",clicks:1,circles:[{x:160,y:269,shots:4,angle:0,gap:90,armor:0},{x:160,y:416,shots:0,angle:0,gap:90,armor:0},{x:282,y:272,shots:0,angle:0,gap:90,armor:0},{x:42,y:272,shots:0,angle:0,gap:90,armor:0},{x:160,y:126,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Shooting",clicks:4,circles:[{x:257,y:420,shots:1,angle:180,gap:90,armor:0},{x:257,y:225,shots:1,angle:180,gap:90,armor:0},{x:65,y:421,shots:0,angle:0,gap:90,armor:0},{x:256,y:323,shots:0,angle:0,gap:90,armor:0},{x:64,y:323,shots:1,angle:0,gap:90,armor:0},{x:64,y:226,shots:0,angle:0,gap:90,armor:0},{x:64,y:128,shots:1,angle:0,gap:90,armor:0},{x:258,y:128,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Simple order",clicks:1,circles:[{x:165,y:264,shots:1,angle:180,armor:0},{x:275,y:264,shots:0,angle:0,armor:0},{x:49,y:264,shots:1,angle:0,armor:0}]}),this.addLevel({name:"Medium Quad",clicks:2,circles:[{x:53,y:385,shots:1,angle:-90,gap:90,armor:0},{x:268,y:385,shots:1,angle:180,gap:90,armor:0},{x:268,y:158,shots:1,angle:90,gap:90,armor:0},{x:159,y:267,shots:4,angle:0,gap:90,armor:0},{x:50,y:159,shots:0,angle:0,gap:90,armor:0},{x:161,y:385,shots:0,angle:0,gap:90,armor:0},{x:266,y:269,shots:0,angle:0,gap:90,armor:0},{x:52,y:268,shots:0,angle:0,gap:90,armor:0},{x:163,y:158,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Quads 2 Touch",clicks:2,circles:[{x:122,y:116,shots:0,angle:0,gap:90,armor:0},{x:124,y:429,shots:0,angle:0,gap:90,armor:0},{x:45,y:351,shots:0,angle:0,gap:90,armor:0},{x:284,y:353,shots:0,angle:0,gap:90,armor:0},{x:120,y:351,shots:4,angle:0,gap:90,armor:0},{x:196,y:429,shots:0,angle:0,gap:90,armor:0},{x:40,y:192,shots:0,angle:0,gap:90,armor:0},{x:201,y:116,shots:0,angle:0,gap:90,armor:0},{x:278,y:191,shots:0,angle:0,gap:90,armor:0},{x:200,y:192,shots:4,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Simple order2",clicks:1,circles:[{x:153,y:359,shots:1,angle:-90,armor:0},{x:153,y:278,shots:1,angle:-90,armor:0},{x:153,y:189,shots:1,angle:90,armor:0},{x:153,y:114,shots:1,angle:90,armor:0},{x:154,y:435,shots:0,angle:0,armor:0}]}),this.addLevel({name:"Spiral",clicks:1,circles:[{x:53,y:139,shots:0,angle:0,gap:90,armor:0},{x:129,y:139,shots:1,angle:180,gap:90,armor:0},{x:203,y:139,shots:1,angle:180,gap:90,armor:0},{x:273,y:206,shots:1,angle:-90,gap:90,armor:0},{x:273,y:269,shots:1,angle:-90,gap:90,armor:0},{x:273,y:342,shots:1,angle:-90,gap:90,armor:0},{x:205,y:410,shots:1,angle:0,gap:90,armor:0},{x:134,y:410,shots:1,angle:0,gap:90,armor:0},{x:62,y:344,shots:1,angle:90,gap:90,armor:0},{x:62,y:273,shots:1,angle:90,gap:90,armor:0},{x:129,y:205,shots:1,angle:180,gap:90,armor:0},{x:202,y:273,shots:1,angle:-90,gap:90,armor:0},{x:270,y:139,shots:1,angle:180,gap:90,armor:0},{x:273,y:415,shots:1,angle:-90,gap:90,armor:0},{x:62,y:410,shots:1,angle:0,gap:90,armor:0},{x:57,y:205,shots:1,angle:90,gap:90,armor:0},{x:202,y:346,shots:1,angle:-90,gap:90,armor:0},{x:204,y:205,shots:1,angle:180,gap:90,armor:0},{x:129,y:275,shots:1,angle:90,gap:90,armor:0},{x:129,y:347,shots:1,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Triple Shoot",clicks:3,circles:[{x:258,y:123,shots:0,angle:0,gap:90,armor:0},{x:258,y:427,shots:0,angle:0,gap:90,armor:0},{x:39,y:349,shots:0,angle:0,gap:90,armor:0},{x:110,y:348,shots:0,angle:0,gap:90,armor:0},{x:111,y:273,shots:0,angle:0,gap:90,armor:0},{x:261,y:198,shots:0,angle:0,gap:90,armor:0},{x:259,y:349,shots:4,angle:0,gap:90,armor:0},{x:183,y:272,shots:4,angle:0,gap:90,armor:0},{x:111,y:199,shots:4,angle:0,gap:90,armor:0},{x:40,y:200,shots:0,angle:0,gap:90,armor:0},{x:185,y:348,shots:0,angle:0,gap:90,armor:0},{x:260,y:271,shots:0,angle:0,gap:90,armor:0},{x:109,y:120,shots:0,angle:0,gap:90,armor:0},{x:184,y:197,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Yellow Start",clicks:6,circles:[{x:162,y:264,shots:4,angle:0,gap:90,armor:1},{x:159,y:409,shots:0,angle:0,gap:90,armor:1},{x:277,y:264,shots:0,angle:0,gap:90,armor:1},{x:43,y:264,shots:0,angle:0,gap:90,armor:1},{x:160,y:131,shots:0,angle:0,gap:90,armor:1}]}),this.addLevel({name:"Yellow Intro",clicks:4,circles:[{x:197,y:264,shots:0,angle:0,gap:90,armor:1},{x:127,y:264,shots:0,angle:0,gap:90,armor:1},{x:125,y:412,shots:1,angle:-90,gap:90,armor:0},{x:122,y:111,shots:1,angle:90,gap:90,armor:0},{x:272,y:264,shots:1,angle:180,gap:90,armor:0},{x:48,y:264,shots:1,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Corners",clicks:1,circles:[{x:78,y:121,shots:0,angle:0,gap:90,armor:0},{x:82,y:420,shots:0,angle:0,gap:90,armor:0},{x:82,y:347,shots:2,angle:-90,gap:90,armor:0},{x:188,y:347,shots:2,angle:180,gap:90,armor:0},{x:183,y:194,shots:2,angle:90,gap:90,armor:0},{x:82,y:194,shots:2,angle:0,gap:90,armor:0},{x:191,y:420,shots:0,angle:0,gap:90,armor:0},{x:258,y:347,shots:0,angle:0,gap:90,armor:0},{x:253,y:196,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Many Clicks2",clicks:16,circles:[{x:276,y:392,shots:0,angle:0,gap:90,armor:0},{x:201,y:392,shots:0,angle:0,gap:90,armor:0},{x:124,y:392,shots:0,angle:0,gap:90,armor:0},{x:50,y:392,shots:0,angle:0,gap:90,armor:0},{x:276,y:312,shots:0,angle:0,gap:90,armor:0},{x:201,y:312,shots:0,angle:0,gap:90,armor:0},{x:124,y:312,shots:0,angle:0,gap:90,armor:0},{x:50,y:312,shots:0,angle:0,gap:90,armor:0},{x:276,y:230,shots:0,angle:0,gap:90,armor:0},{x:201,y:230,shots:0,angle:0,gap:90,armor:0},{x:124,y:230,shots:0,angle:0,gap:90,armor:0},{x:50,y:230,shots:0,angle:0,gap:90,armor:0},{x:276,y:154,shots:0,angle:0,gap:90,armor:0},{x:201,y:154,shots:0,angle:0,gap:90,armor:0},{x:124,y:154,shots:0,angle:0,gap:90,armor:0},{x:50,y:154,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Simple Yellow",clicks:1,circles:[{x:68,y:221,shots:0,angle:0,gap:90,armor:1},{x:165,y:221,shots:2,angle:0,gap:180,armor:0},{x:165,y:117,shots:1,angle:90,gap:90,armor:0},{x:165,y:433,shots:0,angle:0,gap:90,armor:0},{x:165,y:327,shots:2,angle:180,gap:90,armor:0},{x:66,y:325,shots:0,angle:0,gap:90,armor:0},{x:269,y:327,shots:1,angle:180,gap:90,armor:0},{x:269,y:221,shots:2,angle:90,gap:90,armor:0}]}),this.addLevel({name:"More Yellow",clicks:1,circles:[{x:65,y:363,shots:1,angle:0,gap:90,armor:0},{x:65,y:202,shots:1,angle:0,gap:90,armor:0},{x:65,y:282,shots:2,angle:90,gap:180,armor:0},{x:159,y:130,shots:0,angle:-90,gap:90,armor:0},{x:159,y:433,shots:0,angle:-90,gap:90,armor:0},{x:254,y:202,shots:1,angle:180,gap:90,armor:0},{x:251,y:282,shots:2,angle:90,gap:180,armor:0},{x:159,y:282,shots:2,angle:0,gap:180,armor:0},{x:157,y:202,shots:1,angle:90,gap:90,armor:1},{x:254,y:365,shots:1,angle:180,gap:90,armor:0},{x:157,y:365,shots:1,angle:-90,gap:90,armor:1}]}),this.addLevel({name:"Yellow Four",clicks:2,circles:[{x:43,y:429,shots:0,angle:0,gap:90,armor:1},{x:267,y:429,shots:1,angle:180,gap:90,armor:0},{x:260,y:123,shots:1,angle:90,gap:90,armor:1},{x:43,y:123,shots:2,angle:0,gap:90,armor:0},{x:158,y:123,shots:2,angle:0,gap:180,armor:1},{x:43,y:276,shots:0,angle:0,gap:90,armor:1},{x:158,y:433,shots:1,angle:-90,gap:90,armor:0},{x:267,y:275,shots:1,angle:180,gap:90,armor:0},{x:157,y:276,shots:4,angle:0,gap:90,armor:1}]}),this.addLevel({name:"Red Intro",clicks:3,circles:[{x:280,y:275,shots:1,angle:180,gap:90,armor:0},{x:155,y:125,shots:1,angle:90,gap:90,armor:0},{x:47,y:277,shots:1,angle:0,gap:90,armor:0},{x:157,y:275,shots:0,angle:0,gap:90,armor:2}]}),this.addLevel({name:"RedQuad",clicks:3,circles:[{x:44,y:278,shots:0,angle:0,gap:90,armor:0},{x:160,y:142,shots:0,angle:0,gap:90,armor:0},{x:160,y:410,shots:0,angle:0,gap:90,armor:0},{x:278,y:276,shots:0,angle:0,gap:90,armor:0},{x:160,y:277,shots:4,angle:0,gap:90,armor:2}]}),this.addLevel({name:"Right Order",clicks:3,circles:[{x:128,y:145,shots:0,angle:0,gap:90,armor:0},{x:201,y:145,shots:0,angle:0,gap:90,armor:0},{x:52,y:380,shots:1,angle:-90,gap:90,armor:0},{x:127,y:379,shots:1,angle:180,gap:90,armor:0},{x:280,y:380,shots:1,angle:-90,gap:90,armor:0},{x:202,y:379,shots:2,angle:0,gap:180,armor:0},{x:202,y:300,shots:1,angle:0,gap:90,armor:0},{x:127,y:300,shots:2,angle:0,gap:180,armor:0},{x:129,y:223,shots:1,angle:180,gap:90,armor:0},{x:206,y:223,shots:1,angle:180,gap:90,armor:0},{x:284,y:223,shots:1,angle:180,gap:90,armor:0},{x:280,y:145,shots:1,angle:180,gap:90,armor:0},{x:49,y:145,shots:1,angle:0,gap:90,armor:0},{x:54,y:223,shots:0,angle:0,gap:90,armor:0},{x:282,y:302,shots:0,angle:0,gap:90,armor:0},{x:50,y:302,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Reds",clicks:4,circles:[{x:206,y:388,shots:0,angle:0,gap:90,armor:1},{x:282,y:306,shots:0,angle:0,gap:90,armor:0},{x:46,y:306,shots:0,angle:0,gap:90,armor:1},{x:118,y:388,shots:0,angle:0,gap:90,armor:0},{x:122,y:139,shots:0,angle:0,gap:90,armor:1},{x:206,y:308,shots:4,angle:0,gap:90,armor:1},{x:46,y:222,shots:0,angle:0,gap:90,armor:1},{x:282,y:222,shots:0,angle:0,gap:90,armor:0},{x:206,y:139,shots:0,angle:0,gap:90,armor:0},{x:121,y:223,shots:4,angle:0,gap:90,armor:0},{x:121,y:308,shots:4,angle:0,gap:90,armor:1},{x:206,y:223,shots:4,angle:0,gap:90,armor:2}]}),this.addLevel({name:"Many Clicks3",clicks:6,circles:[{x:50,y:312,shots:2,angle:90,gap:180,armor:0},{x:199,y:312,shots:4,angle:0,gap:90,armor:0},{x:275,y:233,shots:1,angle:90,gap:90,armor:0},{x:198,y:154,shots:1,angle:0,gap:90,armor:0},{x:122,y:230,shots:2,angle:0,gap:180,armor:0},{x:276,y:392,shots:0,angle:0,gap:90,armor:0},{x:201,y:392,shots:0,angle:0,gap:90,armor:0},{x:124,y:392,shots:0,angle:0,gap:90,armor:0},{x:50,y:392,shots:0,angle:0,gap:90,armor:0},{x:276,y:312,shots:0,angle:0,gap:90,armor:0},{x:124,y:312,shots:0,angle:0,gap:90,armor:0},{x:201,y:230,shots:0,angle:0,gap:90,armor:0},{x:50,y:230,shots:0,angle:0,gap:90,armor:0},{x:276,y:154,shots:0,angle:0,gap:90,armor:0},{x:124,y:154,shots:0,angle:0,gap:90,armor:0},{x:50,y:154,shots:0,angle:0,gap:90,armor:0}]}),this.addLevel({name:"Reds2",clicks:3,circles:[{x:252,y:267,shots:2,angle:90,gap:180,armor:0},{x:159,y:360,shots:2,angle:0,gap:180,armor:0},{x:74,y:267,shots:2,angle:90,gap:180,armor:0},{x:163,y:171,shots:2,angle:0,gap:180,armor:0},{x:252,y:358,shots:4,angle:0,gap:90,armor:2},{x:73,y:358,shots:4,angle:0,gap:90,armor:2},{x:73,y:173,shots:4,angle:0,gap:90,armor:2},{x:163,y:264,shots:4,angle:0,gap:90,armor:1},{x:250,y:168,shots:4,angle:0,gap:90,armor:2}]}),this.addLevel({name:"Sides",clicks:1,circles:[{x:42,y:434,shots:1,angle:0,gap:90,armor:0},{x:42,y:131,shots:1,angle:0,gap:90,armor:0},{x:278,y:433,shots:0,angle:0,gap:90,armor:0},{x:282,y:129,shots:0,angle:0,gap:90,armor:0},{x:204,y:284,shots:2,angle:180,gap:180,armor:0},{x:285,y:284,shots:1,angle:180,gap:90,armor:0},{x:120,y:284,shots:2,angle:180,gap:180,armor:0},{x:46,y:286,shots:2,angle:90,gap:180,armor:2}]}),this.addLevel({name:"Blue Intro",clicks:1,circles:[{x:159,y:430,shots:1,angle:-90,gap:90,armor:0},{x:163,y:115,shots:2,angle:0,gap:90,armor:0},{x:276,y:270,shots:2,angle:90,gap:90,armor:0},{x:44,y:274,shots:2,angle:-90,gap:90,armor:0},{x:48,y:430,shots:1,angle:-90,gap:90,armor:0},{x:162,y:274,shots:0,angle:0,gap:90,armor:3},{x:275,y:115,shots:1,angle:90,gap:90,armor:0},{x:48,y:115,shots:1,angle:0,gap:90,armor:0},{x:273,y:430,shots:1,angle:180,gap:90,armor:0}]}),this.addLevel({name:"Many Clicks",clicks:16,circles:[{x:87,y:329,shots:0,angle:0,gap:90,armor:3},{x:232,y:329,shots:0,angle:0,gap:90,armor:3},{x:232,y:174,shots:0,angle:0,gap:90,armor:3},{x:86,y:174,shots:0,angle:0,gap:90,armor:3}]}),this.addLevel({name:"Shooting 2",clicks:1,circles:[{x:48,y:437,shots:1,angle:-90,gap:90,armor:0},{x:282,y:437,shots:2,angle:180,gap:90,armor:0},{x:128,y:436,shots:2,angle:180,gap:90,armor:0},{x:207,y:436,shots:2,angle:180,gap:90,armor:0},{x:284,y:360,shots:2,angle:-90,gap:180,armor:0},{x:209,y:363,shots:2,angle:-90,gap:90,armor:0},{x:127,y:363,shots:2,angle:-90,gap:90,armor:0},{x:48,y:363,shots:2,angle:-90,gap:90,armor:0},{x:50,y:287,shots:2,angle:-90,gap:180,armor:0},{x:282,y:288,shots:2,angle:180,gap:90,armor:0},{x:128,y:287,shots:2,angle:180,gap:90,armor:0},{x:207,y:287,shots:2,angle:180,gap:90,armor:0},{x:282,y:204,shots:2,angle:-90,gap:180,armor:0},{x:207,y:207,shots:2,angle:-90,gap:90,armor:0},{x:125,y:207,shots:2,angle:-90,gap:90,armor:0},{x:46,y:207,shots:2,angle:-90,gap:90,armor:0},{x:280,y:118,shots:0,angle:0,gap:90,armor:3},{x:203,y:118,shots:0,angle:0,gap:90,armor:3},{x:123,y:118,shots:0,angle:0,gap:90,armor:3},{x:45,y:118,shots:0,angle:0,gap:90,armor:3}]}),this.curLevel=void 0},addLevel:function(a){var b=this.levels.length,c=new Level(b,a);this.levels.push(c)},levelStart:function(a){this.curLevel=this.levels[a],this.clicks=this.curLevel.clicks,this.isLevelCompleted=!1,this.isLevelFailed=!1,this.levelView=new LevelView(this),Main.addView(this.levelView)},levelAbort:function(){Main.removeViewByClass(LevelView),Main.removeViewByClass(LevelCompleteView),Main.removeViewByClass(LevelFailView),Main.removeViewByClass(PauseView),Main.removeViewByClass(GameCompleteView)},levelNext:function(){var a=this.curLevel.id;this.levelAbort(),a==this.levels.length-1?this.gameComplete():this.levelStart(a+1)},bulletOutOfBounds:function(a){this.levelView.removeComponent(a),this.maybeLevelEnd()},circleBulletCollision:function(a,b){this.levelView.removeComponent(b),this.removeCircle(a)},circleClicked:function(a){this.clicks>0?(this.clicks--,this.levelView.updateClicksText(),this.removeCircle(a)):this.levelView.noClicksLeft()},removeCircle:function(a){a.explode(),this.maybeLevelEnd()},maybeLevelEnd:function(){this.isLevelCompleted||this.isLevelFailed||(this.levelView.noCircles()?this.levelComplete():0==this.clicks&&this.levelView.noBullets()&&this.levelFail())},levelComplete:function(){this.isLevelCompleted=!0,this.curLevel.isCompleted=!0,this.progress.levelComplete(),Main.addView(new LevelCompleteView(this)),Sounds.play("sndLevelComplete")},levelFail:function(){this.isLevelFailed=!0,Main.addView(new LevelFailView(this)),Sounds.play("sndLevelFail")},gameComplete:function(){Main.addView(new GameCompleteView(this))},gameAbort:function(){this.levelAbort(),Main.addView(new LevelSelectView(this))}}),GameProgress=Class.extend({init:function(a){this.game=a,this.initSound(),this.initLevels()},initSound:function(){Sounds.soundEnabled="false"==localStorage["game.soundEnabled"]?!1:!0},saveSound:function(){localStorage["game.soundEnabled"]=Sounds.soundEnabled},initLevels:function(){if(void 0!=localStorage["game.levels"])for(var a=0;a<this.game.levels.length;a++){var b=this.game.levels[a];"true"==localStorage["game.levels."+a+".isCompleted"]&&(b.isOpen=!0,b.isCompleted=!0)}this.updateOpenLevels()},updateOpenLevels:function(){var a,b;if(Config.OPEN_ALL_LEVELS)for(a=0;a<this.game.levels.length;a++)b=this.game.levels[a],b.isOpen=!0;else for(a=0;a<this.game.levels.length;a++)if(b=this.game.levels[a],!b.isCompleted){b.isOpen=!0;break}},levelComplete:function(){localStorage["game.levels"]="true";var a=this.game.curLevel.id;localStorage["game.levels."+a+".isCompleted"]="true",this.updateOpenLevels()},traceLevels:function(){for(var a=0;a<this.game.levels.length;a++){var b=this.game.levels[a];console.log(b.id+" "+b.isCompleted)}},clear:function(){localStorage.clear(),this.uncompleteLevels(),this.updateOpenLevels()},uncompleteLevels:function(){for(var a=0;a<this.game.levels.length;a++){var b=this.game.levels[a];b.isCompleted=!1,b.isOpen=!1}}}),Level=Class.extend({init:function(a,b){this.id=a,this.data=b,this.clicks=b.clicks,this.isCompleted=!1,this.isOpen=!1}}),gameDiv,canvas,stage,assets,resizer,Main=ComponentBox.extend({init:function(){this._super(),this.zzz="Boo!",gameDiv=document.getElementById("gameArea"),canvas=document.getElementById("gameCanvas"),stage=new createjs.Stage(canvas),resizer=new Resizer,createjs.Touch.enable(stage),createjs.Ticker.setFPS(60),stage.enableMouseOver(10),createjs.Ticker.on("tick",this.tick),assets=new Assets(this.preloaderComplete,this)},testFunc:function(a,b){console.log("Name "+a+", profession "+b+". "+this.zzz)},preloaderComplete:function(){Config.TRANSPARENT&&(stage.alpha=.5),Main.views=[],Main.backContainer=new createjs.Container,Main.viewContainer=new createjs.Container,Main.topContainer=new createjs.Container,Main.fpsContainer=new createjs.Container,stage.addChild(Main.backContainer),stage.addChild(Main.viewContainer),stage.addChild(Main.topContainer),stage.addChild(Main.fpsContainer),Fader.init(),Config.SHOW_FPS&&Main.addView(new FPSView),this.game=new Game,Main.addView(new MainMenuView(this.game)),Sounds.startMusic(),this.addComponent(new Background),$(window).on("blur",$.proxy(this.onBlur,this)),$(window).on("focus",$.proxy(this.onFocus,this)),resizer.loaded()},onBlur:function(){Main.FOCUS&&(Main.FOCUS=!1,Sounds.stopMusic())},onFocus:function(){0==Main.FOCUS&&(Main.FOCUS=!0,Sounds.startMusic())},tick:function(a){stage.update(a)}});Main.FOCUS=!0,Main.addView=function(a){Main.views.push(a)},Main.removeViewByClass=function(a){for(var b=Main.views.length-1;b>=0;b--){var c=Main.views[b];if(c instanceof a){Main.views.splice(b,1),c.destroy();break}}},Main.getViewByClass=function(a){for(var b=Main.views.length-1;b>=0;b--){var c=Main.views[b];if(c instanceof a)return c}return null};var Preloader=Class.extend({init:function(){var a=20,b=200,c=(Config.WIDTH-b)/2,d=Config.HEIGHT/2-20,e=a+10,f=b+10,g=(Config.WIDTH-f)/2,h=Config.HEIGHT/2-25;this.loaderEdge=new createjs.Shape,this.loaderEdge.graphics.setStrokeStyle(2).beginStroke("#000000").drawRect(g,h,f,e).endStroke(),stage.addChild(this.loaderEdge),this.loaderBar=new createjs.Shape,this.loaderBar.graphics.beginFill("#000000").drawRect(0,d,b,a).endFill(),this.loaderBar.x=c,this.loaderBar.scaleX=0,stage.addChild(this.loaderBar),this.percentTf=new createjs.Text("0%","40px Arial","#555555"),this.percentTf.textAlign="center",this.percentTf.x=Config.WIDTH/2,this.percentTf.y=Config.HEIGHT/2-80,stage.addChild(this.percentTf);var i=this.percentTf.y;createjs.Tween.get(this.percentTf,{loop:!0}).to({y:i-10},1e3,createjs.Ease.sineInOut).to({y:i},1e3,createjs.Ease.sineInOut)},update:function(a){var b=Math.round(100*a);this.percentTf.text=b+"%",this.loaderBar.scaleX=a,stage.update()},destroy:function(){createjs.Tween.removeTweens(this.percentTf),stage.removeChild(this.loaderEdge),stage.removeChild(this.loaderBar),stage.removeChild(this.percentTf),stage.update()}}),Resizer=Class.extend({init:function(){this.android=!1,this.chromeOS=!1,this.iOS=!1,this.macOS=!1,this.windows=!1,this.linux=!1,this.desktop=!1,this.parseUserAgent(),Resizer.onResize=this.onResize,window.onresize=Resizer.onResize,this.onResize()},loaded:function(){this.isMobile()&&(this.checkOrientation(),$(window).on("orientationchange",$.proxy(this.onRotate,this)))},onRotate:function(){this.checkOrientation()},onResize:function(){var a=window.innerWidth,b=window.innerHeight,c=Config.WIDTH,d=Config.HEIGHT,e=Math.min(a/c,b/d),f=c*e,g=d*e;gameDiv.style.width=f+"px",gameDiv.style.height=g+"px",gameDiv.style.marginTop=-g/2+"px",gameDiv.style.marginLeft=-f/2+"px",stage.scaleX=e,stage.scaleY=e,stage.canvas.width=f,stage.canvas.height=g,stage.update()},parseUserAgent:function(){var a=navigator.userAgent;/Android/.test(a)?this.android=!0:/CrOS/.test(a)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?this.iOS=!0:/Linux/.test(a)?this.linux=!0:/Mac OS/.test(a)?this.macOS=!0:/Windows/.test(a)&&(this.windows=!0),(this.windows||this.macOS||this.linux)&&(this.desktop=!0)},checkOrientation:function(){this.isCorrectOrientation()?Main.removeViewByClass(RotateDeviceView):Main.addView(new RotateDeviceView)},isCorrectOrientation:function(){return 0===window.orientation||180===window.orientation?!0:!1},isMobile:function(){return!this.desktop},isDesktop:function(){return this.desktop}}),Sounds=Class.extend({});Sounds.soundEnabled=!0,Sounds.musicChannel=void 0,Sounds.play=function(a){if(Sounds.soundEnabled){createjs.Sound.play(a)}},Sounds.toggle=function(){Sounds.soundEnabled=!Sounds.soundEnabled,Sounds.soundEnabled?Sounds.startMusic():Sounds.stopMusic()},Sounds.startMusic=function(){Sounds.soundEnabled&&(Sounds.musicChannel=createjs.Sound.play("music",{loop:-1,volume:.5}))},Sounds.stopMusic=function(){Sounds.musicChannel&&Sounds.musicChannel.stop()};var texts={TUTORIAL:"Tap monsters to clear the playfield!",LEVEL:"Level: ",TAPS:"Taps: ",GAME_BY:"Idea, code: Eugene Karataev",ART_BY:"Art: Siimon Talviste",MUSIC_BY:"Music: Kevin MacLeod"},Background=ComponentBox.extend({init:function(){this._super(),this.container=new createjs.Container,Main.backContainer.addChild(this.container),this.addComponent(new Picture(this.container,"background")),this.cloud1=new Cloud(this.container,1),this.addComponent(this.cloud1),this.cloud2=new Cloud(this.container,2),this.addComponent(this.cloud2),this.cloud3=new Cloud(this.container,1),this.addComponent(this.cloud3),this.cloud4=new Cloud(this.container,2),this.addComponent(this.cloud4),this.tickListener=createjs.Ticker.on("tick",this.tick,this)},tick:function(){this.cloud1.update(),this.cloud2.update(),this.cloud3.update(),this.cloud4.update()},destroy:function(){this._super(),createjs.Ticker.off("tick",this.tickListener),Main.backContainer.removeChild(this.container)}}),Bullet=ComponentBox.extend({init:function(a,b,c,d,e,f,g,h){this.game=a,this.view=b,this.parent=c,this.x=d,this.y=e,this.dx=f,this.dy=g,this._super(),this.pic=new Picture(this.parent,"bullet",{x:d,y:e,center:!0}),this.pic.bitmap.rotation=h,this.addComponent(this.pic)},update:function(){var a=1;this.x+=this.dx*a,this.y+=this.dy*a,this.pic.setPos(this.x,this.y);var b=Config.WIDTH,c=Config.HEIGHT;(this.x<0||this.x>b||this.y<0||this.y>c)&&this.game.bulletOutOfBounds(this)},destroy:function(){this._super()}}),Button=Component.extend({init:function(a,b,c,d,e){if(this.parent=a,this.assetName=b,this.callback=c,this.scope=d,this.x=0,this.y=0,this.center=!1,this.pressedAssetName=this.assetName,this.scale=1,e&&(void 0!=e.x&&(this.x=e.x),void 0!=e.y&&(this.y=e.y),void 0!=e.center&&(this.center=e.center),void 0!=e.pressed&&(this.pressedAssetName=e.pressed),void 0!=e.scale&&(this.scale=e.scale)),this.container=new createjs.Container,this.container.x=this.x,this.container.y=this.y,this.parent.addChild(this.container),this.container.scaleX=this.container.scaleY=this.scale,this.bmp=new createjs.Bitmap(assets.get(this.assetName)),this.container.addChild(this.bmp),this.bmpPressed=new createjs.Bitmap(assets.get(this.pressedAssetName)),this.container.addChild(this.bmpPressed),this.bmpPressed.visible=!1,this.center){var f=this.bmp.image.width,g=this.bmp.image.height;this.bmp.x=-f/2,this.bmp.y=-g/2;var h=this.bmpPressed.image.width,i=this.bmpPressed.image.height;this.bmpPressed.x=-h/2,this.bmpPressed.y=-i/2}this.enableClick(),this.bmp.cursor="pointer"},hide:function(){this.container.visible=!1},show:function(){this.container.visible=!0},scaleHide:function(){this.container.scaleX=this.container.scaleY=1,createjs.Tween.get(this.container).to({scaleX:0,scaleY:0},200)},scaleShow:function(){this.container.visible=!0,this.container.scaleX=this.container.scaleY=0,createjs.Tween.get(this.container).to({scaleX:1,scaleY:1},200)},enableClick:function(){this.container.addEventListener("mousedown",this),this.container.addEventListener("pressup",this)},disableClick:function(){this.container.removeEventListener("mousedown",this),this.container.removeEventListener("pressup",this)},handleEvent:function(a){switch(a.type){case"mousedown":this.bmp.visible=!1,this.bmpPressed.visible=!0;break;case"pressup":this.bmpPressed.visible=!1,this.bmp.visible=!0,Sounds.play("sndClick"),this.callback.call(this.scope,this)}},destroy:function(){this.disableClick(),this.parent.removeChild(this.container)}}),ButtonRect=Component.extend({init:function(a,b,c,d){this.parent=a,this.callback=b,this.scope=c,this.x=0,this.y=0,this.width=100,this.height=100,this.color="#FFFFFF",this.alpha=1,d&&(void 0!=d.x&&(this.x=d.x),void 0!=d.y&&(this.y=d.y),void 0!=d.width&&(this.width=d.width),void 0!=d.height&&(this.height=d.height),void 0!=d.alpha&&(this.alpha=d.alpha)),this.shape=new createjs.Shape,this.shape.graphics.beginFill(this.color).drawRect(0,0,this.width,this.height),this.shape.x=this.x,this.shape.y=this.y,this.shape.alpha=this.alpha,this.parent.addChild(this.shape),this.enableClick(),this.shape.cursor="pointer"},hide:function(){this.shape.visible=!1},show:function(){this.shape.visible=!0},enableClick:function(){this.shape.addEventListener("click",this)},disableClick:function(){this.shape.removeEventListener("click",this)},handleEvent:function(a){switch(a.type){case"click":Sounds.play("sndClick"),this.callback.call(this.scope,this)}},destroy:function(){this.disableClick(),this.parent.removeChild(this.shape)}}),Circle=ComponentBox.extend({init:function(a,b,c,d){this.game=a,this.view=b,this.parent=c,this.x=0,this.y=0,this.shots=0,this.angle=0,this.armor=0,this.gap=90,this.wobble=!1,this.eyesAsset="face1",d&&(void 0!=d.x&&(this.x=d.x),void 0!=d.y&&(this.y=d.y),void 0!=d.shots&&(this.shots=d.shots),void 0!=d.angle&&(this.angle=d.angle),void 0!=d.gap&&(this.gap=d.gap),void 0!=d.armor&&(this.armor=d.armor),void 0!=d.wobble&&(this.wobble=d.wobble),void 0!=d.eyesAsset&&(this.eyesAsset=d.eyesAsset)),this._super(),0==this.armor?this.assetName="circle":1==this.armor?this.assetName="circle2":2==this.armor?this.assetName="circle3":3==this.armor&&(this.assetName="circle4"),this.holder=new createjs.Container,this.holder.x=this.x,this.holder.y=this.y,this.parent.addChild(this.holder),this.parse(),this.pic=new Picture(this.holder,this.assetName,{x:0,y:0,center:!0}),this.addComponent(this.pic),this.eyes=new Eyes(this.holder,-35,-35,this.armor,!0,this.eyesAsset),this.addComponent(this.eyes),this.pic.bitmap.addEventListener("click",this),this.wobble?(Sounds.play("sndWobble"),this.doWobble()):this.tweenBorn()},tweenBorn:function(){this.holder.scaleX=this.holder.scaleY=0,createjs.Tween.get(this.holder).to({scaleX:1,scaleY:1},500,createjs.Ease.backOut)},doWobble:function(){for(var a=110,b=createjs.Tween.get(this.holder),c=1,d=1,e=0;10>e;e++)e%2==0?(c=1.1-.01*e,d=.9+.01*e):(c=.9+.01*e,d=1.1-.01*e),b=b.to({scaleX:c,scaleY:d},a)},parse:function(){for(var a=(this.x,this.y,Config.CIRCLE_RADIUS),b=0;b<this.shots;b++){var c=(b*this.gap+this.angle)*Math.PI/180,d=Math.cos(c)*a,e=Math.sin(c)*a;this.addPicBullet(d,e,c)}},addPicBullet:function(a,b,c){var d=new Picture(this.holder,"bullet",{x:a,y:b,center:!0});d.bitmap.rotation=180*c/Math.PI,this.addComponent(d)},handleEvent:function(a){switch(a.type){case"click":this.game.circleClicked(this)}},explode:function(){if(this.view.removeComponent(this),this.armor>0){var a=this.armor-1;this.view.addCircle(this.x,this.y,this.shots,this.angle,this.gap,a,!0,this.eyesAsset)}else{this.view.addComponent(new CircleExplode(this.view,this.parent,this.assetName,this.x,this.y,this.armor,this.eyesAsset)),Sounds.play("sndPop");for(var b=0;b<this.shots;b++)this.view.addBullet(this.x,this.y,b*this.gap+this.angle)}},destroy:function(){this.pic.bitmap.removeEventListener("click",this),this._super(),this.parent.removeChild(this.holder)}}),CircleExplode=ComponentBox.extend({init:function(a,b,c,d,e,f,g){this._super(),this.view=a,this.parent=b,this.armor=f,this.eyesAsset=g,this.holder=new createjs.Container,this.holder.x=d,this.holder.y=e,this.parent.addChild(this.holder),this.pic=new Picture(this.holder,c,{x:0,y:0,center:!0}),this.addComponent(this.pic),this.addComponent(new Eyes(this.holder,-35,-35,this.armor,!1,this.eyesAsset)),createjs.Tween.get(this.holder).to({scaleX:2,scaleY:2,alpha:0},200).call(this.complete,[],this)},complete:function(){this.view.removeComponent(this)},destroy:function(){this._super(),this.parent.removeChild(this.holder)}}),CircleParticle=ComponentBox.extend({init:function(a,b,c){this.game=a,this.parent=b,this.emitter=c,this._super();var d=Config.CIRCLE_RADIUS,e=d+Math.floor(Math.random()*(Config.WIDTH-2*d)),f=Config.HEIGHT+d;this.dx=.01*(Config.WIDTH/2-e),this.dy=-(6+5*Math.random()),this.acc=Math.abs(.1),this.dangle=-5+10*Math.random(),this.holder=new createjs.Container,this.holder.x=e,this.holder.y=f,this.parent.addChild(this.holder),this.assetName="circle";var g=Math.floor(4*Math.random());0==g?this.assetName="circle":1==g?this.assetName="circle2":2==g?this.assetName="circle3":3==g&&(this.assetName="circle4"),this.addComponent(new Picture(this.holder,this.assetName,{center:!0}));var h=1+Math.floor(4*Math.random()),i="face"+h;this.addComponent(new Eyes(this.holder,-35,-35,g,!1,i)),this.holder.scaleX=this.holder.scaleY=.5+.5*Math.random()},update:function(){this.holder.y+=this.dy,this.holder.x+=this.dx,this.holder.rotation+=this.dangle,this.dy+=this.acc,this.holder.y>=Config.HEIGHT+100&&this.emitter.removeComponent(this)},destroy:function(){this._super(),this.parent.removeChild(this.holder)}}),CirclesEmitter=ComponentBox.extend({init:function(a,b){this.game=a,this.parent=b,this._super(),this.delay=1,this.tickListener=createjs.Ticker.on("tick",this.tick,this)},tick:function(){this.delay--,this.delay<=0&&(this.delay=30+Math.floor(20*Math.random()),this.createParticle()),this.updateParticles()
},createParticle:function(){var a=new CircleParticle(this.game,this.parent,this);this.addComponent(a)},updateParticles:function(){for(var a=this.components.length-1;a>=0;a--){var b=this.components[a];b.update()}},destroy:function(){this._super(),createjs.Ticker.off("tick",this.tickListener)}}),Cloud=ComponentBox.extend({init:function(a,b){this.parent=a,this.id=b,this._super(),this.speed=.5/b,this.assetName="",1==this.id?this.assetName="cloud1":2==this.id&&(this.assetName="cloud2"),this.pic=new Picture(this.parent,this.assetName),this.addComponent(this.pic),this.width=this.pic.bitmap.image.width,this.height=this.pic.bitmap.image.height;var c=Math.floor(Math.random()*Config.WIDTH),d=Math.floor(Math.random()*(350-this.height));this.pic.setPos(c,d)},update:function(){this.pic.bitmap.x+=this.speed,this.pic.bitmap.x>Config.WIDTH&&this.resetPos()},resetPos:function(){this.pic.bitmap.x=-this.width,this.pic.bitmap.y=Math.floor(Math.random()*(350-this.height))}}),Dialog=ComponentBox.extend({init:function(a,b,c){this.game=a,this.parent=b,this._super(),this.asset="dialogSmall",this.x=0,this.y=0,this.blockBack=!1,c&&(c.asset&&(this.asset=c.asset),void 0!=c.x&&(this.x=c.x),void 0!=c.y&&(this.y=c.y),void 0!=c.blockBack&&(this.blockBack=c.blockBack)),this.blockBack&&(this.pic=new Picture(this.parent,"blackBack"),this.addComponent(this.pic),this.pic.bitmap.addEventListener("click",this)),this.holder=new createjs.Container,this.holder.x=this.x,this.holder.y=this.y,this.parent.addChild(this.holder),this.addComponent(new Picture(this.holder,this.asset));var d=this.holder.y;this.holder.y=Config.HEIGHT,createjs.Tween.get(this.holder).to({y:d},1e3,createjs.Ease.backOut),this.blockBack&&(this.pic.bitmap.alpha=0,createjs.Tween.get(this.pic.bitmap).to({alpha:1},500))},handleEvent:function(a){switch(a.type){case"click":}},destroy:function(){this._super(),this.blockBack&&this.pic.bitmap.removeEventListener("click",this),this.parent.removeChild(this.holder)}}),Eyes=ComponentBox.extend({init:function(a,b,c,d,e,f){this.parent=a,this.x=b,this.y=c,this.shouldBlink=e,this.armor=d,this._super(),this.assetName=f,this.idleAnim="idle0",this.blinkAnim="blink0","face2"==this.assetName&&(this.idleAnim="idle1",this.blinkAnim="blink1"),"face3"==this.assetName&&(this.idleAnim="idle2",this.blinkAnim="blink2"),"face4"==this.assetName&&(this.idleAnim="idle3",this.blinkAnim="blink3"),this.anim=new createjs.Sprite(Eyes.getSpriteSheet(),this.idleAnim),this.anim.x=this.x,this.anim.y=this.y,this.parent.addChild(this.anim),this.shouldBlink&&this.waitForBlink()},waitForBlink:function(){var a=3e3+Math.floor(3e3*Math.random());createjs.Tween.get(this.anim).wait(a).call(this.blink,[],this)},blink:function(){this.anim.gotoAndPlay(this.blinkAnim),this.waitForBlink()},destroy:function(){this._super(),this.parent.removeChild(this.bmp),this.parent.removeChild(this.anim)}});Eyes.getSpriteSheet=function(){if(void 0==Eyes.spriteSheet){var a={framerate:20,images:["assets/images/eyesAnim.png"],frames:{width:70,height:70},animations:{blink0:{frames:[0,1,2,3,4,3,2,1,0],next:"idle0"},idle0:{frames:[0]},blink1:{frames:[5,6,7,8,9,8,7,6,5],next:"idle1"},idle1:{frames:[5]},blink2:{frames:[10,11,12,13,14,13,12,11,10],next:"idle2"},idle2:{frames:[10]},blink3:{frames:[15,16,17,18,19,18,17,16,15],next:"idle3"},idle3:{frames:[15]}}};Eyes.spriteSheet=new createjs.SpriteSheet(a)}return Eyes.spriteSheet};var LevelItem=ComponentBox.extend({init:function(a,b,c,d,e){this.game=a,this.parent=b,this.level=c,this._super(),this.holder=new createjs.Container,this.holder.x=d,this.holder.y=e,this.parent.addChild(this.holder);var f="#000000";if(c.isOpen){var g;c.isCompleted?(g="levelItemCompleteBack",f="#3F6400"):(g="levelItemBack",f="#09715B"),this.addComponent(new Button(this.holder,g,this.click,this,{center:!0}))}else f="#808080",this.addComponent(new Picture(this.holder,"levelItemLockedBack",{center:!0}));var h=this.level.id+1;this.addComponent(new TextField(this.holder,h,{align:"center",baseline:"middle",color:f,font:"bold 30px Overlock"})),c.isOpen||this.addComponent(new Picture(this.holder,"levelItemLock",{x:10,y:0}))},click:function(){Fader.fade(this.levelStart,this)},levelStart:function(){Main.removeViewByClass(LevelSelectView),this.game.levelStart(this.level.id)},destroy:function(){this._super(),this.parent.removeChild(this.holder)}}),LevelsGroup=ComponentBox.extend({init:function(a,b,c){this.id=a,this.game=b,this.parent=c,this._super(),this.holder=new createjs.Container,this.holder.y=this.id*Config.HEIGHT,this.parent.addChild(this.holder);for(var d=3,e=100,f=100,g=(Config.WIDTH-e*(d-1))/2,h=120,i=9*this.id,j=9*(this.id+1),k=0,l=i;j>l;l++){var m=this.game.levels[l],n=g+k%d*e,o=h+Math.floor(k/d)*f,p=new LevelItem(this.game,this.holder,m,n,o);this.addComponent(p),k++}},destroy:function(){this._super(),this.parent.removeChild(this.holder)}}),Picture=Component.extend({init:function(a,b,c){if(this.parent=a,this.assetName=b,this.x=0,this.y=0,this.center=!1,this.childIndex=this.parent.getNumChildren(),this.scale=1,c&&(void 0!=c.x&&(this.x=c.x),void 0!=c.y&&(this.y=c.y),void 0!=c.center&&(this.center=c.center),void 0!=c.childIndex&&(this.childIndex=c.childIndex),void 0!=c.scale&&(this.scale=c.scale)),this.bitmap=new createjs.Bitmap(assets.get(b)),this.bitmap.x=this.x,this.bitmap.y=this.y,this.bitmap.scaleX=this.bitmap.scaleY=this.scale,this.parent.addChildAt(this.bitmap,this.childIndex),this.center){var d=this.bitmap.image.width,e=this.bitmap.image.height;this.bitmap.regX=d/2,this.bitmap.regY=e/2}},setPos:function(a,b){this.bitmap.x=a,this.bitmap.y=b},destroy:function(){this.parent.removeChild(this.bitmap)}}),SoundIcon=Component.extend({init:function(a,b,c,d){this.parent=b,this.game=a,this.holder=new createjs.Container,this.parent.addChild(this.holder),this.holder.x=c,this.holder.y=d,this.bmpOn=new createjs.Bitmap(assets.get("soundIconOn")),this.holder.addChild(this.bmpOn),this.bmpOff=new createjs.Bitmap(assets.get("soundIconOff")),this.holder.addChild(this.bmpOff),this.updateIcon(),this.holder.addEventListener("click",this)},updateIcon:function(){Sounds.soundEnabled?(this.bmpOn.visible=!0,this.bmpOff.visible=!1):(this.bmpOn.visible=!1,this.bmpOff.visible=!0)},handleEvent:function(a){switch(a.type){case"click":Sounds.toggle(),Sounds.play("sndClick"),this.game.progress.saveSound(),this.updateIcon()}},destroy:function(){this.holder.removeEventListener("click",this),this.parent.removeChild(this.holder)}}),TextField=Component.extend({init:function(a,b,c){this.parent=a,this.x=0,this.y=0,this.color=TextField.defaultColor,this.font=TextField.defaultFont,this.align=TextField.defaultAlign,this.baseline=TextField.defaultBaseline,this.shadow=!1,this.outline=TextField.defaultOutline,c&&(c.color&&(this.color=c.color),c.x&&(this.x=c.x),c.y&&(this.y=c.y),c.font&&(this.font=c.font),c.align&&(this.align=c.align),c.baseline&&(this.baseline=c.baseline),void 0!=c.shadow&&(this.shadow=c.shadow),void 0!=c.outline&&(this.outline=c.outline)),this.tf=new createjs.Text(b,this.font,this.color),this.tf.x=this.x,this.tf.y=this.y,this.tf.textAlign=this.align,this.tf.textBaseline=this.baseline,this.tf.outline=this.outline,this.shadow&&(this.tf.shadow=new createjs.Shadow("#000000",3,3,2)),this.parent.addChild(this.tf)},setText:function(a){this.tf.text=a},destroy:function(){this.parent.removeChild(this.tf)}});TextField.defaultColor="#000000",TextField.defaultFont="bold 30px Arial",TextField.defaultAlign="left",TextField.defaultBaseline="top",TextField.defaultOutline=0;var Tutorial=ComponentBox.extend({init:function(a,b){this.game=a,this.parent=b,this._super(),0==this.game.curLevel.id&&this.addText(texts.TUTORIAL)},addText:function(a){this.addComponent(new TextField(this.parent,a,{x:Config.WIDTH/2,y:240,align:"center",font:"22px Overlock",color:"#FFFFFF",shadow:!0}))}}),CreditsView=Dialog.extend({init:function(a){this._super(a,Main.viewContainer,{asset:"dialogBig",x:28,y:45,blockBack:!0}),this.addComponent(new Picture(this.holder,"creditsTitle",{x:80,y:10})),this.addComponent(new Button(this.holder,"closeButton",this.closeClick,this,{x:245,y:18,center:!0,pressed:"closeButtonPressed"})),this.logoBt=new Button(this.holder,"postepennoLogo",this.logoClick,this,{x:65,y:60,scale:.8}),this.addComponent(this.logoBt),this.addHitArea(this.logoBt.bmp),this.addComponent(new TextField(this.holder,texts.GAME_BY,{x:132,y:245,align:"center",font:"bold 21px PT Sans Narrow"})),this.addComponent(new TextField(this.holder,"eugene.karataev@gmail.com",{x:132,y:270,align:"center",font:"bold 19px PT Sans Narrow"})),this.addComponent(new ButtonRect(this.holder,this.karataevClick,this,{x:20,y:245,width:235,height:50,alpha:.01})),this.addComponent(new TextField(this.holder,texts.ART_BY,{x:132,y:310,align:"center",font:"bold 22px PT Sans Narrow"})),this.addComponent(new TextField(this.holder,"siimontalviste@gmail.com",{x:132,y:335,align:"center",font:"bold 19px PT Sans Narrow"}))},addHitArea:function(a){var b=new createjs.Shape;b.graphics.beginFill("#000").drawRect(0,0,a.image.width,a.image.height),a.hitArea=b},karataevClick:function(){window.location.href="mailto:eugene.karataev@gmail.com"},logoClick:function(){window.open("http://postepenno.com","_blank")},closeClick:function(){Main.removeViewByClass(CreditsView)}}),DeleteProgressView=Dialog.extend({init:function(a){this._super(a,Main.viewContainer,{asset:"dialogMedium",x:50,y:240,blockBack:!0}),this.addComponent(new Picture(this.holder,"deleteProgressTitle",{x:16,y:20,scale:.85})),this.addComponent(new Button(this.holder,"yesButton",this.yesClick,this,{x:60,y:135,center:!0,pressed:"yesButtonPressed"})),this.addComponent(new Button(this.holder,"noButton",this.noClick,this,{x:160,y:135,center:!0,pressed:"noButtonPressed"}))},yesClick:function(){this.game.progress.clear(),Main.removeViewByClass(DeleteProgressView)},noClick:function(){Main.removeViewByClass(DeleteProgressView)}}),FPSView=ComponentBox.extend({init:function(){this._super(),this.fpsLabel=new TextField(Main.fpsContainer,"FPS",{x:0,y:460,font:"bold 18px Arial"}),this.addComponent(this.fpsLabel),this.tickRef=createjs.Ticker.on("tick",this.tick,this)},tick:function(){var a=Math.round(createjs.Ticker.getMeasuredFPS());this.fpsLabel.setText("FPS "+a)},destroy:function(){this._super(),createjs.Ticker.off("tick",this.tickRef)}}),Fader=Class.extend({});Fader.init=function(){Fader.pic=new Picture(Main.fpsContainer,"fader"),Fader.pic.bitmap.addEventListener("click",Fader),Fader.pic.bitmap.visible=!1},Fader.handleEvent=function(){},Fader.fade=function(a,b){Fader.pic.bitmap.visible=!0,Fader.pic.bitmap.alpha=0,createjs.Tween.get(Fader.pic.bitmap).to({alpha:1},300).call(a,[],b).to({alpha:0},300).call(Fader.fadeComplete)},Fader.fadeComplete=function(){Fader.pic.bitmap.visible=!1};var GameCompleteView=Dialog.extend({init:function(a){this._super(a,Main.viewContainer,{asset:"dialogSmall",x:50,y:330,blockBack:!1}),this.addComponent(new Picture(this.holder,"gameCompleteTitle",{x:15,y:10,scale:.9})),this.addComponent(new Button(this.holder,"exitButton",this.exitClick,this,{x:110,y:85,center:!0,pressed:"exitButtonPressed"})),this.circlesHolder=new createjs.Container,Main.viewContainer.addChildAt(this.circlesHolder,0),this.addComponent(new CirclesEmitter(this.game,this.circlesHolder))},exitClick:function(){Fader.fade(this.goExit,this)},goExit:function(){this.game.gameAbort()},destroy:function(){this._super(),this.parent.removeChild(this.circlesHolder)}}),LevelCompleteView=Dialog.extend({init:function(a){this._super(a,Main.viewContainer,{asset:"dialogSmall",x:50,y:330,blockBack:!1}),this.addTitle(),this.addComponent(new Button(this.holder,"nextButton",this.nextClick,this,{x:110,y:85,center:!0,pressed:"nextButtonPressed"}))},addTitle:function(){this.addComponent(new Picture(this.holder,"levelCompleteTitle",{x:18,y:12,scale:.92}))},nextClick:function(){this.game.levelNext()}}),LevelFailView=Dialog.extend({init:function(a){this._super(a,Main.viewContainer,{asset:"dialogSmall",x:50,y:330,blockBack:!1}),this.addComponent(new Picture(this.holder,"levelFailTitle",{x:20,y:10})),this.addComponent(new Button(this.holder,"restartButton",this.restartClick,this,{x:110,y:90,center:!0,pressed:"restartButtonPressed"}))},restartClick:function(){var a=this.game.curLevel.id;this.game.levelAbort(),this.game.levelStart(a)}}),LevelSelectView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.itemsContainer=new createjs.Container,Main.viewContainer.addChild(this.itemsContainer),this.groups=[];for(var b=0;3>b;b++){var c=new LevelsGroup(b,this.game,this.itemsContainer);this.addComponent(c),this.groups.push(c)}this.addComponent(new Picture(Main.viewContainer,"levelSelectTitle",{x:65,y:20}));var d=new Button(Main.viewContainer,"homeButton",this.homeClick,this,{x:40,y:440,center:!0,pressed:"homeButtonPressed"});this.addComponent(d),this.scrollUp=new Button(Main.viewContainer,"upButton",this.scrollUpClick,this,{x:280,y:440,center:!0,pressed:"upButtonPressed"}),this.addComponent(this.scrollUp),this.scrollDown=new Button(Main.viewContainer,"downButton",this.scrollDownClick,this,{x:205,y:440,center:!0,pressed:"downButtonPressed"}),this.addComponent(this.scrollDown),this.itemsContainer.y=-Config.HEIGHT*LevelSelectView.CURRENT_GROUP_ID,0==LevelSelectView.CURRENT_GROUP_ID?this.scrollUp.hide():2==LevelSelectView.CURRENT_GROUP_ID&&this.scrollDown.hide()},scrollUpClick:function(){1==LevelSelectView.CURRENT_GROUP_ID?this.scrollUp.scaleHide():2==LevelSelectView.CURRENT_GROUP_ID&&this.scrollDown.scaleShow(),LevelSelectView.CURRENT_GROUP_ID--,this.scrollUp.disableClick(),this.scrollDown.disableClick(),createjs.Tween.get(this.itemsContainer).to({y:-Config.HEIGHT*LevelSelectView.CURRENT_GROUP_ID},500,createjs.Ease.quadInOut).call(this.scrollComplete,[],this)},scrollDownClick:function(){0==LevelSelectView.CURRENT_GROUP_ID?this.scrollUp.scaleShow():1==LevelSelectView.CURRENT_GROUP_ID&&this.scrollDown.scaleHide(),LevelSelectView.CURRENT_GROUP_ID++,this.scrollUp.disableClick(),this.scrollDown.disableClick(),createjs.Tween.get(this.itemsContainer).to({y:-Config.HEIGHT*LevelSelectView.CURRENT_GROUP_ID},500,createjs.Ease.quadInOut).call(this.scrollComplete,[],this)},scrollComplete:function(){this.scrollUp.enableClick(),this.scrollDown.enableClick()},homeClick:function(){Fader.fade(this.goHome,this)},goHome:function(){Main.removeViewByClass(LevelSelectView),Main.addView(new MainMenuView(this.game))},gameStart:function(){Main.removeViewByClass(MainMenuView),this.game.levelStart(0)},destroy:function(){this._super(),Main.viewContainer.removeChild(this.itemsContainer)}});LevelSelectView.CURRENT_GROUP_ID=0;var LevelView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.addComponent(new Picture(Main.viewContainer,"LevelTapsBackground",{x:5,y:5})),this.addComponent(new Button(Main.viewContainer,"restartButton",this.restartClick,this,{x:190,y:5,pressed:"restartButtonPressed"})),this.addComponent(new Button(Main.viewContainer,"pauseButton",this.pauseClick,this,{x:255,y:5,pressed:"pauseButtonPressed"})),this.addComponent(new SoundIcon(this.game,Main.viewContainer,125,5));var b=texts.LEVEL+(this.game.curLevel.id+1);this.levelNumText=new TextField(Main.viewContainer,b,{x:15,y:5,font:"25px Overlock",color:"#329800",shadow:!1}),this.addComponent(this.levelNumText),this.clicksText=new TextField(Main.viewContainer,"",{x:15,y:30,font:"25px Overlock",color:"#329800",shadow:!1}),this.updateClicksText(),this.addComponent(this.clicksText);for(var c=this.game.curLevel.data,d=c.circles,e=0;e<d.length;e++){var f=d[e];this.addCircle(f.x,f.y,f.shots,f.angle,f.gap,f.armor,!1)}this.addComponent(new Tutorial(this.game,Main.viewContainer)),this.tickListener=createjs.Ticker.on("tick",this.tick,this)},addCircle:function(a,b,c,d,e,f,g,h){if(void 0!=h)this.eyesAsset=h;else{var i=1+Math.floor(4*Math.random());this.eyesAsset="face"+i}var j=new Circle(this.game,this,Main.viewContainer,{x:a,y:b,shots:c,angle:d,gap:e,armor:f,wobble:g,eyesAsset:this.eyesAsset});this.addComponent(j)},updateClicksText:function(){this.clicksText.setText(texts.TAPS+this.game.clicks)},noClicksLeft:function(){console.log("No taps left :(")},pauseClick:function(){Main.addView(new PauseView(Main.viewContainer,this.game))},restartClick:function(){var a=this.game.curLevel.id;this.game.levelAbort(),this.game.levelStart(a)},addBullet:function(a,b,c){var d=Config.CIRCLE_RADIUS,e=Config.BULLET_SPEED,f=Math.cos(c*Math.PI/180),g=Math.sin(c*Math.PI/180);this.addComponent(new Bullet(this.game,this,Main.viewContainer,a+f*d,b+g*d,f*e,g*e,c))},tick:function(){this.checkCollisions(),this.updateObjects()},checkCollisions:function(){for(var a=this.components.length-1;a>=0;a--){var b=this.components[a];b instanceof Bullet&&this.checkBullet(b)}},checkBullet:function(a){for(var b=this.components.length-1;b>=0;b--){var c=this.components[b];if(c instanceof Circle&&this.checkBulletVsCircle(a,c)){this.game.circleBulletCollision(c,a);break}}},noCircles:function(){for(var a=0;a<this.components.length;a++){var b=this.components[a];if(b instanceof Circle)return!1}return!0},noBullets:function(){for(var a=0;a<this.components.length;a++){var b=this.components[a];if(b instanceof Bullet)return!1}return!0},checkBulletVsCircle:function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d);return e<Config.CIRCLE_RADIUS?!0:!1},updateObjects:function(){for(var a=createjs.Ticker.getMeasuredTickTime(),b=this.components.length-1;b>=0;b--){var c=this.components[b];c instanceof Bullet&&c.update(a)}},destroy:function(){createjs.Ticker.off("tick",this.tickListener),this._super()}}),MainMenuView=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.addComponent(new Picture(Main.viewContainer,"gameTitle",{x:55,y:10}));var b=new Button(Main.viewContainer,"playButtonBig",this.playClick,this,{x:160,y:240,center:!0});createjs.Tween.get(b.container,{loop:!0}).to({scaleX:.8,scaleY:.8},1e3,createjs.Ease.sineInOut).to({scaleX:1,scaleY:1},1e3,createjs.Ease.sineInOut),this.addComponent(b),this.addComponent(new SoundIcon(this.game,Main.viewContainer,130,410));var c="v "+Config.VERSION;this.addComponent(new TextField(Main.viewContainer,c,{x:2,y:2,color:"#FFFFFF",font:"10px Overlock"})),this.addComponent(new Button(Main.viewContainer,"restartButton",this.clearProgressClick,this,{x:280,y:440,center:!0,pressed:"restartButtonPressed"})),this.addComponent(new Button(Main.viewContainer,"creditsButton",this.creditsClick,this,{x:40,y:440,center:!0,pressed:"creditsButtonPressed"}))},creditsClick:function(){Main.addView(new CreditsView(this.game))},clearProgressClick:function(){Main.addView(new DeleteProgressView(this.game))},playClick:function(){Fader.fade(this.gameStart,this)},gameStart:function(){Main.removeViewByClass(MainMenuView),Config.TEST_GAME_COMPLETE?this.game.gameComplete():Main.addView(new LevelSelectView(this.game))}}),PauseView=Dialog.extend({init:function(a,b){this._super(b,a,{asset:"dialogMedium",x:50,y:120,blockBack:!0}),this.addComponent(new Picture(this.holder,"pauseTitle",{x:70,y:30})),this.addComponent(new Button(this.holder,"nextButton",this.resumeClick,this,{x:155,y:136,center:!0,pressed:"nextButtonPressed"})),this.addComponent(new Button(this.holder,"exitButton",this.exitClick,this,{x:62,y:136,center:!0,pressed:"exitButtonPressed"}))},resumeClick:function(){Main.removeViewByClass(PauseView)},exitClick:function(){Fader.fade(this.goExit,this)},goExit:function(){this.game.gameAbort()}}),RotateDeviceView=ComponentBox.extend({init:function(){this._super();var a=new Picture(Main.fpsContainer,"rotateDevice");this.addComponent(a)}});