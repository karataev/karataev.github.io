function Config(){}var Assets=Class.extend({queue:void 0,callback:void 0,scope:void 0,loaderBar:void 0,percentTf:void 0,init:function(a,b){this.callback=a,this.scope=b,this.preloader=new Preloader,this.queue=new createjs.LoadQueue(!1),createjs.Sound.alternateExtensions=["mp3"],this.queue.installPlugin(createjs.Sound);var c,d=["background","mainTitle","playButton","playButtonPressed","mainMenuBack.jpg","homeButton","homeButtonPressed","answerButton","correctButton","correctCheckButton","nextButton","nextButtonPressed","selectedButton","sticker","stickerStar","soundIconOn","soundIconOff","fader","itemGalka","itemKrest","shadow","creditsButton","creditsButtonPressed","creditsBack","closeButton","closeButtonPressed","postepennoLogo","karataev","mrg_logo"],e=["armchair","hungrylion","palitra","spider","napoleon","lola","lodka","newton","carriage","letter","duck","soap","belka","chickens","garden","chess","book","trees","key","beer","house"],f=["sndClick","sndWrong","sndRight"],g=[];for(c=0;c<d.length;c++){var h=-1==d[c].indexOf(".jpg")?d[c]+".png":d[c];g.push({id:d[c],src:"assets/images/"+h})}for(c=0;c<e.length;c++)g.push({id:e[c],src:"assets/pics/"+e[c]+".jpg"});for(c=0;c<f.length;c++)g.push({id:f[c],src:"assets/sounds/"+f[c]+".ogg"});this.queue.on("fileload",this.onFileLoad,this),this.queue.on("complete",this.onComplete,this),this.queue.loadManifest(g)},get:function(a){return this.queue.getResult(a)},onComplete:function(){this.preloader.destroy(),this.callback(this.scope)},onFileLoad:function(){this.preloader.update(this.queue.progress)}}),Component=Class.extend({init:function(){},destroy:function(){}}),ComponentBox=Class.extend({init:function(){this.components=[]},addComponent:function(a){this.components.push(a)},removeComponent:function(a){var b=this.components.indexOf(a);this.components.splice(b,1),a.destroy()},destroyComponents:function(){for(;this.components.length>0;){var a=this.components.pop();a.destroy()}},destroy:function(){this.destroyComponents()}});Config.WIDTH=640,Config.HEIGHT=960,Config.version="0.9",Config.TRANSPARENT=!1,Config.ANIMATION=!0,Config.START_LAST_LEVEL=!1,Config.LANG="RU",Config.URL_MORE_GAMES="http://www.myrealgames.com/mobile-games/?utm_source=IKnowArt&utm_medium=html5_moregames";var Level=Class.extend({init:function(a,b,c,d,e,f){this.id=a,this.asset=b,this.stickerX=c,this.stickerY=d,this.stickerScale=e,this.data=f,this.playerCorrect=!1},getAnswers:function(){return"RU"==Config.LANG?this.data.ru.answers:this.data.en.answers},getTitle:function(){return"RU"==Config.LANG?this.data.ru.title:this.data.en.title}}),gameDiv,canvas,stage,startupAssets,assets,resizer,Main=Class.extend({init:function(){gameDiv=document.getElementById("gameArea"),canvas=document.getElementById("gameCanvas"),stage=new createjs.Stage(canvas),resizer=new Resizer,createjs.Touch.enable(stage),createjs.Ticker.setFPS(60),stage.enableMouseOver(10),startupAssets=new StartupAssets(this.startupPreloaderComplete,this)},startupPreloaderComplete:function(a){a.logo=new Button(stage,"mrg_logo",a.logoClick,a,{x:192,y:120,assets:startupAssets}),assets=new Assets(a.preloaderComplete,a),resizer.onResize()},logoClick:function(){window.open(Config.URL_MORE_GAMES,"_blank")},preloaderComplete:function(a){a.logo.destroy(),Config.TRANSPARENT&&(stage.alpha=.5),createjs.Ticker.on("tick",a.tick),Main.views=[],Main.viewContainer=new createjs.Container,Main.topContainer=new createjs.Container,Main.fpsContainer=new createjs.Container,stage.addChild(Main.viewContainer),stage.addChild(Main.topContainer),stage.addChild(Main.fpsContainer),Fader.init(),Main.addView(new MainMenu)},tick:function(a){stage.update(a)}});Main.addView=function(a){Main.views.push(a)},Main.removeViewByClass=function(a){for(var b=Main.views.length-1;b>=0;b--){var c=Main.views[b];if(c instanceof a){Main.views.splice(b,1),c.destroy();break}}},Main.getViewByClass=function(a){for(var b=Main.views.length-1;b>=0;b--){var c=Main.views[b];if(c instanceof a)return c}return null};var Preloader=Class.extend({init:function(){this.loaderEdge=new createjs.Shape,this.loaderEdge.graphics.setStrokeStyle(2).beginStroke("#000000").drawRect(115,Config.HEIGHT/2-25,410,50).endStroke(),stage.addChild(this.loaderEdge),this.loaderBar=new createjs.Shape,this.loaderBar.graphics.beginFill("#000000").drawRect(0,Config.HEIGHT/2-20,400,40).endFill(),this.loaderBar.x=120,this.loaderBar.scaleX=0,stage.addChild(this.loaderBar),this.percentTf=new createjs.Text("0%","40px Arial","#555555"),this.percentTf.textAlign="center",this.percentTf.x=Config.WIDTH/2,this.percentTf.y=Config.HEIGHT/2-80,stage.addChild(this.percentTf)},update:function(a){var b=Math.round(100*a);this.percentTf.text=b+"%",this.loaderBar.scaleX=a,stage.update()},destroy:function(){stage.removeChild(this.loaderEdge),stage.removeChild(this.loaderBar),stage.removeChild(this.percentTf),stage.update()}}),Resizer=Class.extend({init:function(){Resizer.onResize=this.onResize,this.maxIterations=1,this.iterations=0,window.onresize=Resizer.onResize,this.onResize()},onResize:function(){var a=window.innerWidth,b=window.innerHeight,c=Config.WIDTH,d=Config.HEIGHT,e=Math.min(a/c,b/d),f=c*e,g=d*e;gameDiv.style.width=f+"px",gameDiv.style.height=g+"px",gameDiv.style.marginTop=-g/2+"px",gameDiv.style.marginLeft=-f/2+"px",stage.scaleX=e,stage.scaleY=e,stage.canvas.width=f,stage.canvas.height=g,stage.update()}}),Sounds=Class.extend({});Sounds.soundEnabled=!0,Sounds.play=function(a){if(Sounds.soundEnabled){createjs.Sound.play(a)}},Sounds.toggle=function(){Sounds.soundEnabled=!Sounds.soundEnabled},Sounds.startMusic=function(){Sounds.musicChannel=createjs.Sound.play("music",{loop:-1,volume:.5})};var StartupAssets=Class.extend({queue:void 0,callback:void 0,scope:void 0,loaderBar:void 0,percentTf:void 0,init:function(a,b){this.callback=a,this.scope=b,this.queue=new createjs.LoadQueue(!1),createjs.Sound.alternateExtensions=["mp3"],this.queue.installPlugin(createjs.Sound);var c=[{id:"mrg_logo",src:"assets/images/mrg_logo_256x256.jpg"}];this.queue.on("complete",this.onComplete,this),this.queue.loadManifest(c)},get:function(a){return this.queue.getResult(a)},onComplete:function(){this.callback(this.scope)}}),Util=Class.extend({});Util.shuffle=function(a){for(var b,c,d=a.length;d>0;)c=Math.floor(Math.random()*d),d--,b=a[d],a[d]=a[c],a[c]=b;return a};var AnswerButton=ComponentBox.extend({init:function(a,b,c,d,e){this._super(),this.parent=a,this.text=b,this.game=e,this.container=new createjs.Container,this.parent.addChild(this.container),this.container.x=c,this.container.y=d,this.back=new Picture(this.container,"answerButton"),this.addComponent(this.back),this.tf=new TextField(this.container,this.text,{x:45,y:13,align:"left",font:"bold 25px Arial",color:"#333333"}),this.addComponent(this.tf),this.container.addEventListener("click",this),this.container.cursor="pointer"},hide:function(){this.container.visible=!1},tweenShow:function(a,b){this.container.alpha=0;var c=this.container.y;this.container.y+=40,createjs.Tween.get(this.container).wait(a).to({alpha:1,y:c},b,createjs.Ease.backOut)},tweenHide:function(a,b){var c=this.container.y+40;createjs.Tween.get(this.container).wait(a).to({alpha:0,y:c},b,createjs.Ease.backIn)},handleEvent:function(a){switch(a.type){case"click":Sounds.play("sndClick"),this.doSelect(),this.game.playerAnswered(this.text)}},disable:function(){this.container.cursor=null,this.container.removeEventListener("click",this)},doSelect:function(){this.removeComponent(this.back),this.back=new Picture(this.container,"selectedButton",{childIndex:0}),this.addComponent(this.back)},doCorrect:function(a){this.removeComponent(this.back);var b=a?"correctCheckButton":"correctButton";this.back=new Picture(this.container,b,{childIndex:0}),this.addComponent(this.back)},destroy:function(){this._super(),this.container.removeEventListener("click",this),this.parent.removeChild(this.container)}}),Background=Component.extend({init:function(){this.bitmap=new createjs.Bitmap(assets.get("background")),Main.viewContainer.addChild(this.bitmap)},destroy:function(){Main.viewContainer.removeChild(this.bitmap)}}),Button=Class.extend({init:function(a,b,c,d,e){if(this.parent=a,this.assetName=b,this.callback=c,this.scope=d,this.assets=assets,this.x=0,this.y=0,this.center=!1,this.pressedAssetName=this.assetName,this.scale=1,e&&(void 0!=e.x&&(this.x=e.x),void 0!=e.y&&(this.y=e.y),void 0!=e.center&&(this.center=e.center),void 0!=e.pressed&&(this.pressedAssetName=e.pressed),void 0!=e.scale&&(this.scale=e.scale),void 0!=e.assets&&(this.assets=e.assets)),this.container=new createjs.Container,this.container.x=this.x,this.container.y=this.y,this.parent.addChild(this.container),this.container.scaleX=this.container.scaleY=this.scale,this.bmp=new createjs.Bitmap(this.assets.get(this.assetName)),this.container.addChild(this.bmp),this.bmpPressed=new createjs.Bitmap(this.assets.get(this.pressedAssetName)),this.container.addChild(this.bmpPressed),this.bmpPressed.visible=!1,this.center){var f=this.bmp.image.width,g=this.bmp.image.height;this.bmp.x=-f/2,this.bmp.y=-g/2;var h=this.bmpPressed.image.width,i=this.bmpPressed.image.height;this.bmpPressed.x=-h/2,this.bmpPressed.y=-i/2}this.enableClick(),this.bmp.cursor="pointer"},hide:function(){this.container.visible=!1},show:function(){this.container.visible=!0},scaleHide:function(){this.container.scaleX=this.container.scaleY=1,createjs.Tween.get(this.container).to({scaleX:0,scaleY:0},200)},scaleShow:function(){this.container.visible=!0,this.container.scaleX=this.container.scaleY=0,createjs.Tween.get(this.container).to({scaleX:1,scaleY:1},200)},enableClick:function(){this.container.addEventListener("mousedown",this),this.container.addEventListener("pressup",this)},disableClick:function(){this.container.removeEventListener("mousedown",this),this.container.removeEventListener("pressup",this)},handleEvent:function(a){switch(a.type){case"mousedown":this.bmp.visible=!1,this.bmpPressed.visible=!0;break;case"pressup":this.bmpPressed.visible=!1,this.bmp.visible=!0,Sounds.play("sndClick"),this.callback.call(this.scope,this)}},destroy:function(){this.disableClick(),this.parent.removeChild(this.container)}}),Description=ComponentBox.extend({init:function(a,b){this._super(),this.game=a,this.parent=b,this.container=new createjs.Container,this.container.x=0,this.container.y=100,this.parent.addChild(this.container),this.createBack(),this.tf=new TextField(this.container,"",{x:10,y:20,font:"22px Arial",baseline:"middle"}),this.tf.tf.lineWidth=620,this.addComponent(this.tf)},createBack:function(){var a=new createjs.Graphics;a.beginFill("#EEEEEE").drawRect(0,0,Config.WIDTH,50),this.back=new createjs.Shape(a),this.back.alpha=.7,this.container.addChild(this.back)},setText:function(a){this.tf.setText(a)},hide:function(){this.container.alpha=0},show:function(){this.container.alpha=1},fadeIn:function(a,b){this.container.alpha=0,createjs.Tween.get(this.container).wait(a).to({alpha:1},b)},fadeOut:function(a,b){createjs.Tween.get(this.container).wait(a).to({alpha:0},b)},destroy:function(){this._super(),this.parent.removeChild(this.container)}}),GalleryItem=ComponentBox.extend({init:function(a,b,c,d){this._super(),this.parent=a;var e=new Picture(this.parent,b.asset,{x:c,y:d});e.bitmap.scaleX=e.bitmap.scaleY=.15,this.addComponent(e);var f=b.playerCorrect?"itemGalka":"itemKrest",g=new Picture(this.parent,f,{x:c,y:d});this.addComponent(g)}}),Painting=ComponentBox.extend({init:function(a,b){this._super(),this.parent=a,this.level=b,this.container=new createjs.Container,this.container.x=320,this.container.y=455,this.parent.addChild(this.container),this.pic=new Picture(this.container,this.level.asset),this.pic.bitmap.regX=this.pic.bitmap.image.width/2,this.pic.bitmap.regY=this.pic.bitmap.image.height/2,this.addComponent(this.pic),this.sticker=new Sticker(this.container,this.level.stickerX,this.level.stickerY,this.level.stickerScale),this.addComponent(this.sticker)},addStickerStar:function(){this.stickerStar=new Picture(this.container,"stickerStar",{x:this.level.stickerX,y:this.level.stickerY}),this.container.setChildIndex(this.stickerStar.bitmap,1),this.stickerStar.bitmap.scaleX=this.stickerStar.bitmap.scaleY=this.level.stickerScale,this.stickerStar.bitmap.regX=159,this.stickerStar.bitmap.regY=159,this.addComponent(this.stickerStar)},destroy:function(){this._super(),this.parent.removeChild(this.container)}}),Picture=Component.extend({init:function(a,b,c){this.parent=a,this.assetName=b,this.x=0,this.y=0,this.childIndex=this.parent.getNumChildren(),c&&(void 0!=c.x&&(this.x=c.x),void 0!=c.y&&(this.y=c.y),void 0!=c.childIndex&&(this.childIndex=c.childIndex)),this.bitmap=new createjs.Bitmap(assets.get(b)),this.bitmap.x=this.x,this.bitmap.y=this.y,this.parent.addChildAt(this.bitmap,this.childIndex)},setPos:function(a,b){this.bitmap.x=a,this.bitmap.y=b},destroy:function(){this.parent.removeChild(this.bitmap)}}),ResultGallery=ComponentBox.extend({init:function(a,b,c,d){this._super(),this.parent=a,this.game=b,this.container=new createjs.Container,this.container.x=c,this.container.y=d,this.parent.addChild(this.container);var e=96,f=106,g=new createjs.Graphics;g.beginFill("#FFF").drawRect(-5,-5,5*e+10,4*f+10),this.shape=new createjs.Shape(g),this.container.addChild(this.shape);for(var h=0;h<this.game.levels.length;h++){var i=this.game.levels[h],j=h%5*e,k=Math.floor(h/5)*f,l=new GalleryItem(this.container,i,j,k);this.addComponent(l)}},destroy:function(){this._super(),this.parent.removeChild(this.container)}}),SoundIcon=Component.extend({init:function(a,b,c){this.parent=a,this.holder=new createjs.Container,this.parent.addChild(this.holder),this.holder.x=b,this.holder.y=c,this.bmpOn=new createjs.Bitmap(assets.get("soundIconOn")),this.holder.addChild(this.bmpOn),this.bmpOff=new createjs.Bitmap(assets.get("soundIconOff")),this.holder.addChild(this.bmpOff),this.updateIcon(),this.holder.addEventListener("click",this)},updateIcon:function(){Sounds.soundEnabled?(this.bmpOn.visible=!0,this.bmpOff.visible=!1):(this.bmpOn.visible=!1,this.bmpOff.visible=!0)},handleEvent:function(a){switch(a.type){case"click":Sounds.toggle(),Sounds.play("sndClick"),this.updateIcon()}},destroy:function(){this.holder.removeEventListener("click",this),this.parent.removeChild(this.holder)}}),Sticker=Component.extend({init:function(a,b,c,d){this.parent=a,this.bitmap=new createjs.Bitmap(assets.get("sticker")),this.bitmap.x=b,this.bitmap.y=c,this.bitmap.regX=Sticker.WIDTH/2,this.bitmap.regY=Sticker.HEIGHT/2,this.bitmap.scaleX=this.bitmap.scaleY=d,this.parent.addChild(this.bitmap)},setPos:function(a,b){this.bitmap.x=a,this.bitmap.y=b},destroy:function(){this.parent.removeChild(this.bitmap)}});Sticker.WIDTH=204,Sticker.HEIGHT=215;var TextField=Component.extend({init:function(a,b,c){this.parent=a,this.x=0,this.y=0,this.color=TextField.defaultColor,this.font=TextField.defaultFont,this.align=TextField.defaultAlign,this.baseline=TextField.defaultBaseline,c&&(c.color&&(this.color=c.color),c.x&&(this.x=c.x),c.y&&(this.y=c.y),c.font&&(this.font=c.font),c.align&&(this.align=c.align),c.baseline&&(this.baseline=c.baseline)),this.tf=new createjs.Text(b,this.font,this.color),this.tf.x=this.x,this.tf.y=this.y,this.tf.textAlign=this.align,this.tf.textBaseline=this.baseline,this.parent.addChild(this.tf)},setText:function(a){this.tf.text=a},destroy:function(){this.parent.removeChild(this.tf)}});TextField.defaultColor="#000000",TextField.defaultFont="bold 30px Arial",TextField.defaultAlign="left",TextField.defaultBaseline="top";var LevelHideCommand=Class.extend({init:function(a){if(this.game=a,this.game.ui.nextBtn.disableClick(),createjs.Tween.get(this.game.ui.nextBtn.bmp).to({alpha:0},500),Config.ANIMATION){for(var b=0;b<this.game.abuttons.length;b++){var c=this.game.abuttons[b];c.tweenHide(300*b,500)}createjs.Tween.get(this.game.painting.container).to({alpha:0},1500,createjs.Ease.linear).call(this.animationComplete,[],this),this.game.ui.desc.fadeOut(0,500)}else this.animationComplete()},animationComplete:function(){this.game.levelAbort();var a=this.game.curLevel.id+1;a<this.game.levels.length?this.game.levelStart(a):Fader.fade(this.gameComplete,this)},gameComplete:function(){Main.removeViewByClass(Game),Main.addView(new GameComplete(this.game))}}),LevelShowCommand=Class.extend({init:function(a){this.game=a;for(var b=0;b<this.game.abuttons.length;b++){var c=this.game.abuttons[b];c.tweenShow(300*b,500)}var d=this.game.painting.pic.bitmap;d.alpha=0,createjs.Tween.get(d).to({alpha:1},1500,createjs.Ease.linear).call(this.complete,[],this)},complete:function(){}}),PlayerAnsweredCommand=Class.extend({init:function(a){if(this.game=a,this.disableAButtons(),Config.ANIMATION){this.game.painting.addStickerStar();var b=this.game.painting.stickerStar,c=b.bitmap.scaleX;b.bitmap.scaleX=b.bitmap.scaleY=0,createjs.Tween.get(b.bitmap).to({scaleX:c,scaleY:c},1e3,createjs.Ease.backOut).wait(500).to({scaleX:0,scaleY:0},500,createjs.Ease.linear),createjs.Tween.get(b.bitmap).to({rotation:90},2e3,createjs.Ease.linear),createjs.Tween.get(this.game.painting.sticker.bitmap).wait(1800).to({alpha:0},500,createjs.Ease.linear).call(this.animationComplete,[],this),this.game.ui.desc.fadeIn(1800,500)}else this.game.painting.sticker.bitmap.alpha=0,this.animationComplete()},animationComplete:function(){this.game.ui.nextBtn.show(),this.game.ui.nextBtn.enableClick(),this.game.ui.nextBtn.bmp.alpha=0,createjs.Tween.get(this.game.ui.nextBtn.bmp).to({alpha:1},500);var a=this.game.curLevel.getAnswers()[0],b=this.game.getCorrectButton();this.game.playerAnswer===a?(this.game.curLevel.playerCorrect=!0,Sounds.play("sndRight"),b.doCorrect(!0)):(Sounds.play("sndWrong"),b.doCorrect(!1))},disableAButtons:function(){for(var a=0;a<this.game.abuttons.length;a++){var b=this.game.abuttons[a];b.disable()}}}),Credits=ComponentBox.extend({init:function(){this._super(),this.pic=new Picture(Main.viewContainer,"creditsBack",{x:0,y:0}),this.addComponent(this.pic),this.logoBt=new Button(Main.viewContainer,"postepennoLogo",this.logoClick,this,{x:200,y:280}),this.addComponent(this.logoBt),this.addHitArea(this.logoBt.bmp),this.logoBt.disableClick(),this.karataevBt=new Button(Main.viewContainer,"karataev",this.karataevClick,this,{x:128,y:600}),this.addComponent(this.karataevBt),this.addHitArea(this.karataevBt.bmp),this.karataevBt.disableClick();var a=new Button(Main.viewContainer,"closeButton",this.closeClick,this,{x:538,y:252,center:!0,pressed:"closeButtonPressed"});this.addComponent(a),this.pic.bitmap.addEventListener("click",this)},addHitArea:function(a){var b=new createjs.Shape;b.graphics.beginFill("#000").drawRect(0,0,a.image.width,a.image.height),a.hitArea=b},karataevClick:function(){window.location.href="mailto:eugene.karataev@gmail.com"},logoClick:function(){window.open("http://postepenno.com","_blank")},closeClick:function(){Main.removeViewByClass(Credits)},handleEvent:function(a){switch(a.type){case"click":}},destroy:function(){this.pic.bitmap.removeEventListener("click",this),this._super()}}),FPSView=ComponentBox.extend({init:function(){this._super(),this.fpsLabel=new TextField(Main.fpsContainer,"FPS",{x:560,y:0,font:"bold 18px Arial"}),this.addComponent(this.fpsLabel),this.tickRef=createjs.Ticker.on("tick",this.tick,this)},tick:function(){var a=Math.round(createjs.Ticker.getMeasuredFPS());this.fpsLabel.setText("FPS "+a)},destroy:function(){this._super(),createjs.Ticker.off("tick",this.tickRef)}}),Fader=Class.extend({});Fader.init=function(){Fader.pic=new Picture(Main.fpsContainer,"fader"),Fader.pic.bitmap.addEventListener("click",Fader),Fader.pic.bitmap.visible=!1},Fader.handleEvent=function(){},Fader.fade=function(a,b){Fader.pic.bitmap.visible=!0,Fader.pic.bitmap.alpha=0,createjs.Tween.get(Fader.pic.bitmap).to({alpha:1},500).call(a,[],b).to({alpha:0},500).call(Fader.fadeComplete)},Fader.fadeComplete=function(){Fader.pic.bitmap.visible=!1};var Game=ComponentBox.extend({init:function(){this._super(),this.curLevel=void 0,this.playerAnswer=void 0,this.createLevels(),this.addComponent(new Background),this.ui=new GameUI(Main.topContainer,this),this.addComponent(this.ui),this.levelStart(Config.START_LAST_LEVEL?this.levels.length-1:0)},createLevels:function(){this.levels=[],this.addLevel("armchair",-58,29,1,{ru:{answers:["СВЕЧА","КОШКА","ФУТБОЛЬНЫЙ МЯЧ","ОЧКИ"],title:"Винсент Ван Гог. Кресло Гогена, 1888"}}),this.addLevel("hungrylion",55,-225,.77,{ru:{answers:["СОВА","ПАНТЕРА","СКВОРЕЧНИК","ДЯТЕЛ"],title:"Анри Руссо. Проголодавшийся лев набрасывается на антилопу, 1905"}}),this.addLevel("spider",-205,-264,.9,{ru:{answers:["ПАУК","ГРАФФИТИ","ЗАЯЦ","ЯЩЕРИЦА"],title:"Марианна Норт. Коралловая змея и паук, 1873"}}),this.addLevel("napoleon",93,-102,.9,{ru:{answers:["НАПОЛЕОН","ОБАМА","ЦЕЗАРЬ","СУВОРОВ"],title:"Жан-Луи-Эрнест Месонье. Наполеон в походе 1814 г., 1864"}}),this.addLevel("palitra",28,-34,.9,{ru:{answers:["ПАЛИТРА","ЩИТ","ПИСТОЛЕТ","КАРАНДАШ"],title:"Анри Руссо. Портрет-пейзаж, 1890"}}),this.addLevel("lola",6,168,.9,{ru:{answers:["ВЕЕР","БИТА","НОЖ","ЗЕРКАЛО"],title:"Эдуард Мане. Лола из Валенсии, 1862"}}),this.addLevel("lodka",-208,186,.9,{ru:{answers:["ЛОДКА","ПЕРИСКОП","РУСАЛКА","БУЙ"],title:"Кристен Кебке. Вид от Доссерингена близ озера Сортедам около Нерребро, 1838"}}),this.addLevel("newton",192,240,.9,{ru:{answers:["ЦИРКУЛЬ","КАРАНДАШ","КОЛЬЦО","СЕЛЕДКА"],title:"Уильям Блейк. Исаак Ньютон, 1795"}}),this.addLevel("chess",43,18,.88,{ru:{answers:["ШАХМАТЫ","КАЛЬЯН","ПОКЕР","ЛОТО"],title:"Жан-Луи-Эрнест Месонье. Игроки в шахматы, 1853"}}),this.addLevel("carriage",-118,-74,.9,{ru:{answers:["ЭКИПАЖ","ПОЕЗД","ЛОШАДЬ","АВТОМОБИЛЬ"],title:"Винсент Ван Гог. Пейзаж в Овере после дождя, 1890"}}),this.addLevel("letter",-68,-50,.7,{ru:{answers:["ПИСЬМО","ВИНО","АРБУЗ","АЙПАД"],title:"Ян Вермеер. Любовное письмо, 1668"}}),this.addLevel("duck",175,250,.9,{ru:{answers:["АПЕЛЬСИН","КУВШИН","ПАТРОНЫ","КОНФЕТЫ"],title:"Жан Батист Симеон Шарден. Дикая утка и апельсин, 1728-1730"}}),this.addLevel("belka",-106,188,.9,{ru:{answers:["БЕЛКА","ЧАСЫ","ТАРАКАН","ПЕПЕЛЬНИЦА"],title:"Джон Синглтон Копли. Мальчик с белкой, 1775"}}),this.addLevel("chickens",-90,-83,1.22,{ru:{answers:["КУРИЦЫ","ПОРОСЕНОК","КНИГИ","ИКОНА"],title:"Генри Герберт Ла Танге. Продажа куриц в Лигурии, 1906"}}),this.addLevel("soap",106,163,.9,{ru:{answers:["ПУЗЫРЬ","ЖАБА","МОХИТО","ТАРЕЛКА"],title:"Жан Батист Симеон Шарден. Мыльные пузыри, 1733-1735"}}),this.addLevel("garden",-206,-50,1,{ru:{answers:["ЛЕЙКА","САМОВАР","ПЕНЬ","ПАВЛИН"],title:"Эдуард Мане. Семья Моне в их саду в Аржантее, 1874"}}),this.addLevel("book",-49,9,.9,{ru:{answers:["КНИГА","ГОЛУБЬ","ХОТДОГ","ЧЕРЕП"],title:"Жан-Луи-Эрнест Месонье. Молодой человек с книгой, 1860"}}),this.addLevel("trees",-227,209,.75,{ru:{answers:["МУЖЧИНА","ЕДИНОРОГ","ТРОЛЛЬ","КОЛОДЕЦ"],title:"Томас Моран. Под деревьями, 1865"}}),this.addLevel("beer",152,105,.9,{ru:{answers:["ПИВО","БОРЩ","СУШИ","МЕНЮ"],title:"Винсент Ван Гог. Агостина Сегатори в кафе 'Тамбурин', 1887-1888"}}),this.addLevel("house",157,55,1.2,{ru:{answers:["ДОМ","БУЙВОЛ","АВТОЗАПРАВКА","ТРАКТОР"],title:"Винсент Ван Гог. Пейзаж с домом и пахарь, 1889"}})},addLevel:function(a,b,c,d,e){var f=this.levels.length;this.levels.push(new Level(f,a,b,c,d,e))},levelStart:function(a){this.curLevel=this.levels[a];var b=[15,325,15,325],c=[820,820,890,890];this.abuttons=[];var d=this.curLevel.getAnswers().slice(0);d=Util.shuffle(d),this.painting=new Painting(Main.viewContainer,this.curLevel),this.addComponent(this.painting);for(var e=0;4>e;e++){var f=d[e],g=new AnswerButton(Main.topContainer,f,b[e],c[e],this);this.addComponent(g),this.abuttons.push(g)}this.ui.levelStart(),Config.ANIMATION&&new LevelShowCommand(this)},levelAbort:function(){this.removeComponent(this.painting),this.removeAButtons()},removeAButtons:function(){for(;this.abuttons.length>0;){var a=this.abuttons.pop();this.removeComponent(a)}},getCorrectButton:function(){for(var a=this.curLevel.getAnswers()[0],b=0;b<this.abuttons.length;b++){var c=this.abuttons[b];if(c.text===a)return c}return void 0},playerAnswered:function(a){this.playerAnswer=a,new PlayerAnsweredCommand(this)},getNumCorrectAnswers:function(){for(var a=0,b=0;b<this.levels.length;b++){var c=this.levels[b];c.playerCorrect&&a++}return a},getTotalLevels:function(){return this.levels.length},playClick:function(){}}),GameComplete=ComponentBox.extend({init:function(a){this.game=a,this._super(),this.addComponent(new Background),this.parent=Main.viewContainer;var b="RU"==Config.LANG?"Игра пройдена!":"Game Complete!";this.titleTf=new TextField(this.parent,b,{x:Config.WIDTH/2,y:60,font:"60px Arial",align:"center"}),this.addComponent(this.titleTf);var c=this.game.getNumCorrectAnswers(),d=this.game.getTotalLevels(),e="RU"==Config.LANG?"Правильные ответы: ":"Correct answers: ",f=e+c+"/"+d;this.answersTf=new TextField(this.parent,f,{x:Config.WIDTH/2,y:670,font:"30px Arial",align:"center"}),this.addComponent(this.answersTf),this.resultGallery=new ResultGallery(this.parent,this.game,80,180),this.addComponent(this.resultGallery),this.addComponent(new Button(this.parent,"homeButton",this.exitClick,this,{x:360,y:782,scale:1.5,pressed:"homeButtonPressed"})),this.addComponent(new Button(this.parent,"mrg_logo",this.mrgLogoClick,this,{x:175,y:790}))},mrgLogoClick:function(){window.open(Config.URL_MORE_GAMES,"_blank")},exitClick:function(){Fader.fade(this.gameOver,this)},gameOver:function(){Main.removeViewByClass(GameComplete),Main.addView(new MainMenu)}}),GameUI=ComponentBox.extend({init:function(a,b){this._super(),this.parent=a,this.game=b,this.createBack(),this.addComponent(new Button(this.parent,"homeButton",this.exitClick,this,{x:10,y:10,pressed:"homeButtonPressed"})),this.nextBtn=new Button(this.parent,"nextButton",this.nextClick,this,{x:320,y:740,center:!0,pressed:"nextButtonPressed"}),this.nextBtn.hide(),this.addComponent(this.nextBtn),createjs.Tween.get(this.nextBtn.container,{loop:!0}).to({scaleX:1.2,scaleY:1.2},1e3,createjs.Ease.sineInOut).to({scaleX:1,scaleY:1},1e3,createjs.Ease.sineInOut);var c="RU"==Config.LANG?"Уровень ":"Level";this.addComponent(new TextField(this.parent,c,{x:320,y:10,font:"35px Arial",align:"center"})),this.levelTf=new TextField(this.parent,"",{x:320,y:50,font:"40px Arial",align:"center"}),this.addComponent(this.levelTf),this.desc=new Description(this.game,this.parent),this.addComponent(this.desc),this.addComponent(new SoundIcon(this.parent,550,10))},createBack:function(){var a=new createjs.Graphics;a.beginFill("#EEE").drawRect(0,0,Config.WIDTH,100),this.back=new createjs.Shape(a),this.parent.addChild(this.back);var b=new createjs.Graphics;b.beginFill("#EEE").drawRect(0,810,Config.WIDTH,150),this.back2=new createjs.Shape(b),this.parent.addChild(this.back2)},exitClick:function(){Fader.fade(this.gameOver,this)},gameOver:function(){Main.removeViewByClass(Game),Main.addView(new MainMenu)},nextClick:function(){new LevelHideCommand(this.game)},removeAButtons:function(){for(;this.game.abuttons.length>0;){var a=this.game.abuttons.pop();this.game.removeComponent(a)}},levelStart:function(){this.desc.setText(this.game.curLevel.getTitle()),this.desc.hide();var a=this.game.curLevel.id+1,b=this.game.getTotalLevels();this.levelTf.setText(a+"/"+b)},update:function(){var a=Util.formatTime(this.game.gameTime);this.timeTf.setText("Time "+a)},destroy:function(){this._super(),this.parent.removeChild(this.back),this.parent.removeChild(this.back2)}}),MainMenu=ComponentBox.extend({init:function(){this._super(),this.addComponent(new Background),this.addComponent(new Picture(Main.viewContainer,"mainMenuBack.jpg",{x:0,y:0}));var a=new Picture(Main.viewContainer,"mainTitle",{x:427,y:217});a.bitmap.regX=125,a.bitmap.regY=125,this.addComponent(a);var b=new Button(Main.viewContainer,"playButton",this.playClick,this,{x:430,y:676,center:!0,pressed:"playButtonPressed"});createjs.Tween.get(b.container,{loop:!0}).to({scaleX:1.1,scaleY:1.1},1e3,createjs.Ease.sineInOut).to({scaleX:1,scaleY:1},1e3,createjs.Ease.sineInOut),this.addComponent(b);var c=new Button(Main.viewContainer,"creditsButton",this.creditsClick,this,{x:218,y:738,center:!0,pressed:"creditsButtonPressed"});this.addComponent(c),this.addComponent(new Button(Main.viewContainer,"mrg_logo",this.logoClick,this,{x:376,y:388}))},logoClick:function(){window.open(Config.URL_MORE_GAMES,"_blank")},playClick:function(){Fader.fade(this.gameStart,this)},creditsClick:function(){Main.addView(new Credits)},gameStart:function(){Main.removeViewByClass(MainMenu),Main.addView(new Game)}});